<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.0.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>zixcon·blog</title>


    <meta property="og:type" content="website">
<meta property="og:title" content="zixcon·blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;index.html">
<meta property="og:site_name" content="zixcon·blog">
<meta property="og:locale" content="en">
<meta property="og:image" content="http:&#x2F;&#x2F;yoursite.com&#x2F;images&#x2F;og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http:&#x2F;&#x2F;yoursite.com&#x2F;images&#x2F;og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="zixcon·blog" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item is-active"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;" target="_blank" rel="noopener">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-13T09:33:20.000Z">2019-12-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 39 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/13/jvm-pre/">jvm</a>
            
        </h1>
        <div class="content">
            <h3 id="PermGen-space和heap-space区别"><a href="#PermGen-space和heap-space区别" class="headerlink" title="PermGen space和heap space区别"></a>PermGen space和heap space区别</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PermGen space说明方法区OOM</span><br><span class="line">heap space 堆中OOM</span><br></pre></td></tr></table></figure>

<p><strong>jdk8真正开始废弃永久代，而使用元空间(Metaspace)</strong></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-13T07:39:12.000Z">2019-12-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1121 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/13/mysql-index/">mysql索引</a>
            
        </h1>
        <div class="content">
            <h1 id="聚簇索引与非聚簇索引"><a href="#聚簇索引与非聚簇索引" class="headerlink" title="聚簇索引与非聚簇索引"></a>聚簇索引与非聚簇索引</h1><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>​    <strong>聚簇索引是对磁盘上实际数据重新组织以按指定的一个或多个列的值排序的算法。</strong>特点是存储数据的顺序和索引顺序一致。<br>​    <strong>一般情况下主键会默认创建聚簇索引，且一张表只允许存在一个聚簇索引。</strong></p>
<p>​    在《数据库原理》一书中是这么解<strong>释聚簇索引和非聚簇索引的区别</strong>的：<br>​    <strong>聚簇索引的叶子节点就是数据节点，而非聚簇索引的叶子节点仍然是索引节点，只不过有指向对应数据块的指针。</strong></p>
<p>综上，可以得出聚簇索引和非聚簇索引概念：</p>
<p><strong>聚簇索引：即存储索引值，又存储行数据，数据文件和索引文件是同一个文件</strong></p>
<p><strong>非聚簇索引：索引文件和数据文件是独立分开的</strong></p>
<p>​    那么如果数据表中没有主键呢？MySQL的解决办法是隐式地将一个唯一的非空的列定义为聚簇。那如果这也没有呢？MySQL就自己创建一个聚簇索引。</p>
<p>​    <strong>在Innodb中，二级索引除了存储本身的列值外，其叶子节点存储的不是‘行指针’，而是主键值</strong>，为什么是这样呢？原来这种方式在表结构发生变化的时候会有很大的优势。如果二级索引的存储顺序是以列值为基础的，那么在发生数据行的移动或者增加删除时候，必定会引起索引结构的巨大变化。</p>
<h3 id="MyISAM与InnoDB"><a href="#MyISAM与InnoDB" class="headerlink" title="MyISAM与InnoDB"></a>MyISAM与InnoDB</h3><p>​    mysql存储引擎MyISAM与InnoDB的底层数据结构的区别主要有，在磁盘上存储的文件以及存储索引以及组织存储索引的方式不同；</p>
<ol>
<li><p>MyISAM索引文件和数据文件是分离的(非聚集)，索引的叶节点存放的是对应索引在文件系统中的数据地址编码</p>
</li>
<li><p>innodb中，数据文件和索引文件是同一个文件，是聚簇索引。（注意区别普通索引）</p>
</li>
</ol>
<p><strong>（1）InnoDB的主键采用聚簇索引存储，使用的是B+Tree作为索引结构，但是叶子节点存储的是索引值和数据本身（注意和MyISAM的不同）。</strong><br><strong>（2）InnoDB的二级索引不使用聚蔟索引，叶子节点存储的是KEY字段加主键值。因此，通过二级索引查询首先查到是主键值，然后InnoDB再根据查到的主键值通过主键索引找到相应的数据块。</strong><br><strong>（3）MyISAM的主键索引和二级索引叶子节点存放的都是列值与行号的组合，叶子节点中保存的是数据的物理地址</strong><br><strong>（4）MyISAM引擎使用B+Tree作为索引结构，叶节点的data域存放的是数据记录的地址</strong><br><strong>（5）为什么用B+Tree 不是BTree：</strong><br>    B-Tree：如果一次检索需要访问4个节点，数据库系统设计者利用磁盘预读原理，把节点的大小设计为一个页，那读取一个节点只需要一次I/O操作，完成这次检索操作，最多需要3次I/O(根节点常驻内存)。数据记录越小，每个节点存放的数据就越多，树的高度也就越小，I/O操作就少了，检索效率也就上去了。<br>    B+Tree：非叶子节点只存key，大大滴减少了非叶子节点的大小，那么每个节点就可以存放更多的记录，树更矮了，I/O操作更少了。所以B+Tree拥有更好的性能。</p>
<p>​    由于节子节点(数据页)只能按照一颗B+树排序，故<strong>一张表只能有一个聚簇索引</strong>。辅助索引的存在不影响聚簇索引中数据的组织，所以一张表可以有多个辅助索引</p>
<p>参照：<a href="https://www.cnblogs.com/xibuhaohao/p/10736112.html" target="_blank" rel="noopener">mysql InnoDB index 主键采用聚簇索引，二级索引不采用聚簇索引</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-13T06:23:41.000Z">2019-12-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 minutes read (About 1624 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/13/http-pre/">http1.x、http 2和https</a>
            
        </h1>
        <div class="content">
            <h2 id="一、HTTP-1-x"><a href="#一、HTTP-1-x" class="headerlink" title="一、HTTP/1.x"></a>一、HTTP/1.x</h2><h3 id="Http1-x"><a href="#Http1-x" class="headerlink" title="Http1.x"></a>Http1.x</h3><ul>
<li><strong>缺陷</strong>：线程阻塞，在同一时间，同一域名的请求有一定数量限制，超过限制数目的请求会被阻塞</li>
</ul>
<h3 id="http1-0"><a href="#http1-0" class="headerlink" title="http1.0"></a>http1.0</h3><ul>
<li><strong>缺陷</strong>：浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接（T<strong>CP连接的新建成本很高，因为需要客户端和服务器三次握手</strong>），服务器完成请求处理后立即断开TCP连接，服务器不跟踪每个客户也不记录过去的请求；</li>
<li><strong>解决方案</strong>：<ul>
<li>添加头信息——非标准的Connection字段<code>Connection: keep-alive</code></li>
</ul>
</li>
</ul>
<h3 id="http1-1："><a href="#http1-1：" class="headerlink" title="http1.1："></a>http1.1：</h3><ul>
<li><strong>改进点：</strong></li>
</ul>
<ol>
<li><strong>持久连接</strong><ul>
<li>引入了持久连接，即TCP连接默认不关闭，可以被多个请求复用，不用声明<code>Connection: keep-alive</code>(对于同一个域名，大多数浏览器允许同时建立6个持久连接)</li>
</ul>
</li>
<li><strong>管道机制</strong><ul>
<li>即在同一个TCP连接里面，客户端可以同时发送多个请求。</li>
</ul>
</li>
<li><strong>分块传输编码</strong><ul>
<li>即服务端没产生一块数据，就发送一块，采用”流模式”而取代”缓存模式”。</li>
</ul>
</li>
<li><strong>新增请求方式</strong><ul>
<li>PUT:请求服务器存储一个资源;</li>
<li>DELETE：请求服务器删除标识的资源；</li>
<li>OPTIONS：请求查询服务器的性能，或者查询与资源相关的选项和需求；</li>
<li>TRACE：请求服务器回送收到的请求信息，主要用于测试或诊断；</li>
<li>CONNECT：保留将来使用</li>
</ul>
</li>
</ol>
<ul>
<li><strong>缺点：</strong><ul>
<li>虽然允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是<strong>按次序进行</strong>的。服务器只有处理完一个请求，才会接着处理下一个请求。如果前面的处理特别慢，后面就会有许多请求排队等着。这将导致“队头堵塞”</li>
<li><strong>避免方式：</strong>一是减少请求数，二是同时多开持久连接</li>
</ul>
</li>
</ul>
<h2 id="二、HTTP-2-0"><a href="#二、HTTP-2-0" class="headerlink" title="二、HTTP/2.0"></a>二、HTTP/2.0</h2><ul>
<li><h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><ol>
<li>采用二进制格式而非文本格式；</li>
<li>完全多路复用，而非有序并阻塞的、只需一个连接即可实现并行；</li>
<li>使用报头压缩，降低开销</li>
<li>服务器推送</li>
</ol>
</li>
</ul>
<p><strong>1. 二进制协议</strong></p>
<ul>
<li>HTTP/1.1 版的头信息肯定是文本（ASCII编码），数据体可以是文本，也可以是二进制。HTTP/2 则是一个彻底的二进制协议，头信息和数据体都是二进制，并且统称为”帧”：头信息帧和数据帧。</li>
<li>二进制协议解析起来更高效、“线上”更紧凑，更重要的是错误更少。</li>
</ul>
<p><strong>2. 完全多路复用</strong></p>
<ul>
<li>HTTP/2 复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了”队头堵塞”。</li>
</ul>
<p><strong>3. 报头压缩</strong></p>
<ul>
<li>HTTP 协议是没有状态，导致每次请求都必须附上所有信息。所以，请求的很多头字段都是重复的，比如Cookie，一样的内容每次请求都必须附带，这会浪费很多带宽，也影响速度。</li>
<li>对于相同的头部，不必再通过请求发送，只需发送一次；</li>
<li>HTTP/2 对这一点做了优化，引入了头信息压缩机制；</li>
<li>一方面，头信息使用gzip或compress压缩后再发送；</li>
<li>另一方面，客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，产生一个索引号，之后就不发送同样字段了，只需发送索引号。</li>
</ul>
<p><strong>4. 服务器推送</strong></p>
<ul>
<li>HTTP/2 允许服务器未经请求，主动向客户端发送资源；</li>
<li>通过推送那些服务器任务客户端将会需要的内容到客户端的缓存中，避免往返的延迟</li>
</ul>
<h2 id="三、HTTPS"><a href="#三、HTTPS" class="headerlink" title="三、HTTPS"></a>三、HTTPS</h2><ul>
<li>HTTP协议通常承载于TCP协议之上，在HTTP和TCP之间添加一个安全协议层（SSL或TSL），这个时候，就成了我们常说的HTTPS.</li>
</ul>
<h3 id="1、HTTPS主要作用"><a href="#1、HTTPS主要作用" class="headerlink" title="1、HTTPS主要作用"></a>1、HTTPS主要作用</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- （1）对数据进行加密，并建立一个信息安全通道，来保证传输过程中的数据安全;</span><br><span class="line">- （2）对网站服务器进行真实身份认证。</span><br></pre></td></tr></table></figure>

<h3 id="2、HTTPS和HTTP的区别"><a href="#2、HTTPS和HTTP的区别" class="headerlink" title="2、HTTPS和HTTP的区别"></a>2、HTTPS和HTTP的区别</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 1、HTTPS是加密传输协议，HTTP是名文传输协议;</span><br><span class="line">- 2、HTTPS需要用到SSL证书，而HTTP不用;</span><br><span class="line">- 3、HTTPS比HTTP更加安全，对搜索引擎更友好，利于SEO,</span><br><span class="line">- 4、HTTPS标准端口443，HTTP标准端口80;</span><br><span class="line">- 5、HTTPS基于传输层，HTTP基于应用层;</span><br></pre></td></tr></table></figure>

<h3 id="3、HTTPS和HTTP的工作过程区别"><a href="#3、HTTPS和HTTP的工作过程区别" class="headerlink" title="3、HTTPS和HTTP的工作过程区别"></a>3、HTTPS和HTTP的工作过程区别</h3><ul>
<li><strong>HTTP 包含动作：</strong><ol>
<li>浏览器打开一个 TCP 连接</li>
<li>浏览器发送 HTTP 请求到服务器端</li>
<li>服务器发送 HTTP 回应信息到浏览器</li>
<li>TCP 连接关闭</li>
</ol>
</li>
<li><strong>SSL 包含动作：</strong><ol>
<li>验证服务器端</li>
<li>客户端和服务器端选择加密算法和密码，确保双方都支持</li>
<li>验证客户端(可选)</li>
<li>使用公钥加密技术来生成共享加密数据</li>
<li>创建一个加密的 SSL 连接</li>
<li>基于该 SSL 连接传递 HTTP 请求</li>
</ol>
</li>
</ul>
<h3 id="4、HTTPS加密方式"><a href="#4、HTTPS加密方式" class="headerlink" title="4、HTTPS加密方式"></a>4、HTTPS加密方式</h3><ul>
<li><p><strong>对称加密</strong>：加密和解密都是使用的同一个密钥；</p>
</li>
<li><p><strong>非对称加密：</strong></p>
<ul>
<li>加密使用的密钥和解密使用的密钥是不相同的，分别称为：公钥、私钥；</li>
<li>公钥和算法都是公开的，私钥是保密的。</li>
<li><strong>非对称加密过程：</strong></li>
</ul>
<ol>
<li>服务端生成配对的公钥和私钥</li>
<li>私钥保存在服务端，公钥发送给客户端</li>
<li>客户端使用公钥加密明文传输给服务端</li>
<li>服务端使用私钥解密密文得到明文</li>
</ol>
</li>
<li><p><strong>数字签名</strong>：签名就是在信息的后面再加上一段内容，可以证明信息没有被修改过。</p>
</li>
</ul>
<p>引用：<a href="https://segmentfault.com/a/1190000015316332" target="_blank" rel="noopener">深入理解http1.x、http 2和https</a></p>
<p><a href="https://blog.wangriyu.wang/2018/05-HTTP2.html" target="_blank" rel="noopener">HTTP/2详解</a></p>
<p><a href="https://blog.csdn.net/qq_35642036/article/details/82788421" target="_blank" rel="noopener">HTTP与HTTPS的区别</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-05T07:59:27.000Z">2019-12-05</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 538 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/05/dubbo-pre/">dubbo学习</a>
            
        </h1>
        <div class="content">
            <p>#学习资料</p>
<p>​    学习的最好资料来源是<strong>官方文档</strong>和<strong>源码</strong></p>
<p>​    这里官方已经很全面了，包括了SPI，服务的引入导出，路由，集群，均衡策略，服务调用过程都做了详细的源码分析。</p>
<p>详细参见：<a href="http://dubbo.apache.org/zh-cn/docs/source_code_guide/service-invoking-process.html" target="_blank" rel="noopener">官方Dubbo 服务调用过程</a></p>
<p>#MOCK测试平台思路：</p>
<p>​    参考dubbo的mock方式，实际项目中测试需要一些数据及结果流程比较长而且复杂，可以抽象一种类似的MOCK方式来简化此过程，参见<a href="https://testerhome.com/topics/7908" target="_blank" rel="noopener">基于 Dubbo 分布式服务框架的一种 MOCK 方式</a></p>
<p><a href="https://www.jb51.net/article/152211.htm" target="_blank" rel="noopener">使用mockito框架mock掉整个RedisTemplate的示例</a></p>
<h1 id="回声测试"><a href="#回声测试" class="headerlink" title="回声测试"></a>回声测试</h1><ul>
<li>回声测试用于检测服务是否可用，回声测试按照正常请求流程执行，能够测试整个调用是否畅通，可用于监控。</li>
<li>所有服务自动实现<code>EchoService</code>接口，只需要将任意服务引用强制转换为<code>EchoService</code>，即可使用。</li>
</ul>
<p><a href="https://blog.csdn.net/u012516166/article/details/78261065" target="_blank" rel="noopener">Dubbo中的回声测试是如何实现的？为什么能将任意的服务引用都强制转为EchoService？</a></p>
<p>流程：</p>
<ol>
<li><p>java中关于强制转换的一个限制：必须有继承关系，就是说两个类之间要能够进行类型转换，必须有继承关系才可以。 可是很明显，我们写的Dubbo服务接口是与EchoService接口没有任何集成关系的，这是如何实现的呢？</p>
<p>服务创建动态代理的时候，是在传入的接口中人为的增加了“EchoService.class”接口</p>
</li>
<li><p>EchoService接口中的方法是怎么实现的呢?</p>
<p>因为Dubbo提供了很多Filter，针对这个EchoService提供了一个EchoFilter实现</p>
</li>
</ol>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EchoService echoService = (EchoService) demoService;</span><br><span class="line">System.out.println(echoService.$echo(<span class="hljs-string">"hello"</span>));</span><br></pre></td></tr></table></figure>

<h1 id="隐式参数-amp-上下文"><a href="#隐式参数-amp-上下文" class="headerlink" title="隐式参数&amp;上下文"></a>隐式参数&amp;上下文</h1><p><a href="https://www.jianshu.com/p/ab2afef2b279" target="_blank" rel="noopener">dubbo一些你不一定知道但是很好用的功能</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-04T02:30:01.000Z">2019-12-04</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 494 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/04/spring-pre/">spring学习前瞻</a>
            
        </h1>
        <div class="content">
            <h2 id="Spring-源码分析文章列表"><a href="#Spring-源码分析文章列表" class="headerlink" title="Spring 源码分析文章列表"></a>Spring 源码分析文章列表</h2><h3 id="Ⅰ-IOC"><a href="#Ⅰ-IOC" class="headerlink" title="Ⅰ. IOC"></a>Ⅰ. IOC</h3><table>
<thead>
<tr>
<th>更新时间</th>
<th>标题</th>
</tr>
</thead>
<tbody><tr>
<td>2018-05-30</td>
<td><a href="http://www.coolblog.xyz/2018/05/30/Spring-IOC-容器源码分析系列文章导读/" target="_blank" rel="noopener">Spring IOC 容器源码分析系列文章导读</a></td>
</tr>
<tr>
<td>2018-06-01</td>
<td><a href="http://www.coolblog.xyz/2018/06/01/Spring-IOC-容器源码分析-获取单例-bean/" target="_blank" rel="noopener">Spring IOC 容器源码分析 - 获取单例 bean</a></td>
</tr>
<tr>
<td>2018-06-04</td>
<td><a href="http://www.coolblog.xyz/2018/06/04/Spring-IOC-容器源码分析-创建单例-bean/" target="_blank" rel="noopener">Spring IOC 容器源码分析 - 创建单例 bean 的过程</a></td>
</tr>
<tr>
<td>2018-06-06</td>
<td><a href="http://www.coolblog.xyz/2018/06/06/Spring-IOC-容器源码分析-创建原始-bean-对象/" target="_blank" rel="noopener">Spring IOC 容器源码分析 - 创建原始 bean 对象</a></td>
</tr>
<tr>
<td>2018-06-08</td>
<td><a href="http://www.coolblog.xyz/2018/06/08/Spring-IOC-容器源码分析-循环依赖的解决办法/" target="_blank" rel="noopener">Spring IOC 容器源码分析 - 循环依赖的解决办法</a></td>
</tr>
<tr>
<td>2018-06-11</td>
<td><a href="http://www.coolblog.xyz/2018/06/11/Spring-IOC-容器源码分析-填充属性到-bean-原始对象/" target="_blank" rel="noopener">Spring IOC 容器源码分析 - 填充属性到 bean 原始对象</a></td>
</tr>
<tr>
<td>2018-06-11</td>
<td><a href="http://www.coolblog.xyz/2018/06/11/Spring-IOC-容器源码分析-余下的初始化工作/" target="_blank" rel="noopener">Spring IOC 容器源码分析 - 余下的初始化工作</a></td>
</tr>
</tbody></table>
<h3 id="Ⅱ-AOP"><a href="#Ⅱ-AOP" class="headerlink" title="Ⅱ. AOP"></a>Ⅱ. AOP</h3><table>
<thead>
<tr>
<th>更新时间</th>
<th>标题</th>
</tr>
</thead>
<tbody><tr>
<td>2018-06-17</td>
<td><a href="http://www.coolblog.xyz/2018/06/17/Spring-AOP-源码分析系列文章导读/" target="_blank" rel="noopener">Spring AOP 源码分析系列文章导读</a></td>
</tr>
<tr>
<td>2018-06-20</td>
<td><a href="http://www.coolblog.xyz/2018/06/20/Spring-AOP-源码分析-筛选合适的通知器/" target="_blank" rel="noopener">Spring AOP 源码分析 - 筛选合适的通知器</a></td>
</tr>
<tr>
<td>2018-06-20</td>
<td><a href="http://www.coolblog.xyz/2018/06/20/Spring-AOP-源码分析-筛选合适的通知器/" target="_blank" rel="noopener">Spring AOP 源码分析 - 创建代理对象</a></td>
</tr>
<tr>
<td>2018-06-22</td>
<td><a href="http://www.coolblog.xyz/2018/06/22/Spring-AOP-源码分析-拦截器链的执行过程/" target="_blank" rel="noopener">Spring AOP 源码分析 - 拦截器链的执行过程</a></td>
</tr>
</tbody></table>
<h3 id="Ⅲ-MVC"><a href="#Ⅲ-MVC" class="headerlink" title="Ⅲ. MVC"></a>Ⅲ. MVC</h3><table>
<thead>
<tr>
<th>更新时间</th>
<th>标题</th>
</tr>
</thead>
<tbody><tr>
<td>2018-06-29</td>
<td><a href="http://www.coolblog.xyz/2018/06/29/Spring-MVC-原理探秘-一个请求的旅行过程/" target="_blank" rel="noopener">Spring MVC 原理探秘 - 一个请求的旅行过程</a></td>
</tr>
<tr>
<td>2018-06-30</td>
<td><a href="http://www.coolblog.xyz/2018/06/30/Spring-MVC-原理探秘-容器的创建过程/" target="_blank" rel="noopener">Spring MVC 原理探秘 - 容器的创建过程</a></td>
</tr>
</tbody></table>
<p>参见：<a href="https://segmentfault.com/a/1190000015221968" target="_blank" rel="noopener">coolblog.xyz</a><br>作者：coolblog.xyz<br>转自：博客：<a href="http://www.coolblog.xyz/?r=sf" target="_blank" rel="noopener">http://www.coolblog.xyz</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-02T06:17:15.000Z">2019-12-02</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 255 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/02/mq-pre/">MQ学习（一）</a>
            
        </h1>
        <div class="content">
            <h4 id="MQ的作用"><a href="#MQ的作用" class="headerlink" title="MQ的作用"></a>MQ的作用</h4><p>​    消息队列中间件主要解决<strong>应用解耦</strong>，<strong>异步消息</strong>，<strong>流量削锋</strong>等问题</p>
<h4 id="MQ带来的新问题"><a href="#MQ带来的新问题" class="headerlink" title="MQ带来的新问题"></a>MQ带来的新问题</h4><p>​    一般而言，引入的外部依赖越多，系统越脆弱。需要考虑消息的重复消费、消息丢失、保证消费顺序、数据一致性问题等</p>
<h5 id="幂等及去重"><a href="#幂等及去重" class="headerlink" title="幂等及去重"></a>幂等及去重</h5><p>​    <strong>幂等性</strong>：就是用户对于同一操作发起的一次请求或者多次请求的结果是一致的</p>
<p>​    <strong>去重策略</strong>：保证每条消息都有唯一编号(<strong>比如唯一流水号)</strong> </p>
<p>​        方法1: 建立一个消息表，拿到这个消息做数据库的insert操作。给这个消息做一个唯一主键（primary key）或者唯一约束(uniq key)，那么就算出现重复消费的情况，就会导致主键冲突，那么就不再处理这条消息。</p>
<p><a href="https://juejin.im/post/5de3c8026fb9a07194761641" target="_blank" rel="noopener">参见</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-11-29T08:50:21.000Z">2019-11-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    21 minutes read (About 3156 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/11/29/zk-paxos/">zookeeper学习之Paxos协议</a>
            
        </h1>
        <div class="content">
            <h4 id="拜占庭将军问题"><a href="#拜占庭将军问题" class="headerlink" title="拜占庭将军问题"></a>拜占庭将军问题</h4><blockquote>
<p>拜占庭位于如今的土耳其的伊斯坦布尔，是东罗马帝国的首都。由于当时拜占庭罗马帝国国土辽阔，为了防御目的，因此每个军队都分隔很远，将军与将军之间只能靠信差传消息。在战争的时候，拜占庭军队内所有将军必需达成 <strong>一致的共识</strong>，决定是否有赢的机会才去攻打敌人的阵营。但是，在军队内有可能存有叛徒和敌军的间谍，左右将军们的决定又扰乱整体军队的秩序，在进行共识时，结果并不代表大多数人的意见。这时候，在已知有成员不可靠的情况下，其余忠诚的将军在不受叛徒或间谍的影响下如何达成一致的协议，拜占庭问题就此形成。 </p>
</blockquote>
<p>​    拜占庭假设是对现实世界的模型化，由于硬件错误、网络拥塞或断开以及遭到恶意攻击，计算机和网络可能出现不可预料的行为。</p>
<p>​    在常见的分布式系统中，总会发生诸如<strong>机器宕机</strong>或<strong>网络异常</strong>（包括消息的延迟、丢失、重复、乱序，还有网络分区）等情况。</p>
<p>​    Paxos算法需要解决的问题就是如何在一个可能发生上述异常的分布式系统中，快速且正确地在集群内部对<strong>某个数据的值</strong>达成<strong>一致</strong>，并且保证不论发生以上任何异常，都不会破坏整个系统的一致性。</p>
<p><img src="./zk-paxos/zk_paxos_1.png" alt></p>
<p>历史／趣事：</p>
<blockquote>
<p>“Leslie Lamport也是用了长达9年的时间来完善这个算法的理论”–</p>
<p>•Lamport大牛在他Paxos的第一个版本早在1990年就提交给ACM TOCS Jnl.的评审委员会了,但是当时没有人理解他的算法 ,主编回执他的稿子建议他用数学而不是神话描述他的算法 他们才会考虑接受这篇paper 。</p>
<p>•Lamport大牛很生气 他有次就在一个会议上说:”为什么搞理论的这群人一点幽默感也没有呢?”, 他拒绝修改 而且withdraw了这篇文章。</p>
<p>•1996年微软的Butler Lampson在WDAG96上提出了重新审视这篇文章 因为他读懂了</p>
<p>•1997年MIT的Nancy Lynch在WDAG97上 根据原文重新改写了这篇文章，Lamport用数学形式化的定义并证明了Paxos。</p>
<p>•于是在1998年的ACM TOCS上 这篇迟到了9年的paper终于被接受了。</p>
<p>•后来2001年 Lamport大牛也作出了让步 他用简单的语言而不是神话故事 重述了原文 ，但是通篇还是没有数学符号， L大牛甚为固执 ，据他自己说 ，他检查过了自己的语言并没有歧义 ，不需要数学来描述。</p>
<p>Google Chubby的作者说：“这个世界上只有一种一致性算法，那就是 （Paxos</p>
</blockquote>
<p>时间线：</p>
<blockquote>
<p>[1]. LESLIE LAMPORT, ROBERT SHOSTAK, MARSHALL PEASE. <a href="http://research.microsoft.com/en-us/um/people/lamport/pubs/byz.pdf" target="_blank" rel="noopener">The Byzantine General Problem</a>. 1982<br> [2]. Leslie Lamport. <a href="http://research.microsoft.com/en-us/um/people/lamport/pubs/lamport-paxos.pdf" target="_blank" rel="noopener">The Part-Time Parliament</a>. 1998<br> [3]. Leslie Lamport. <a href="http://research.microsoft.com/en-us/um/people/lamport/pubs/paxos-simple.pdf" target="_blank" rel="noopener">Paxos Made Simple</a>. 2001<br> [4]. Diego Ongaro and John Ousterhout. <a href="https://ramcloud.stanford.edu/raft.pdf" target="_blank" rel="noopener">Raft Paper</a>. 2013<br> [5]. Raft Website. <a href="https://raft.github.io/" target="_blank" rel="noopener">The Raft Consensus Algorithm</a><br> [6]. Raft Demo. <a href="http://thesecretlivesofdata.com/raft/" target="_blank" rel="noopener">Raft Animate Demo</a></p>
</blockquote>
<h4 id="Paxos共识算法"><a href="#Paxos共识算法" class="headerlink" title="Paxos共识算法"></a>Paxos共识算法</h4><p><img src="./zk-paxos/zk_paxos_2.png" alt></p>
<p>​    Paxos本来是虚构故事中的一个小岛，议会通过表决来达成共识。但是议员可能离开，信使可能走丢，或者重复传递消息。对应到分布式系统的节点故障和网络故障。</p>
<blockquote>
<p> •假设议员要提议中午吃什么。如果有一个或者多个人同时提议，但一次只能通过一个提议，这就是Basic Paxos，是Paxos中最基础的协议。</p>
<p>•显然Basic Paxos是不够高效的，如果将Basic Paxos并行起来，同时提出多个提议，比如中午吃什么、吃完去哪里嗨皮、谁请客等提议，议员也可以同时通过多个提议。这就是Multi-Paxos协议。</p>
</blockquote>
<h4 id="Basic-Paxos"><a href="#Basic-Paxos" class="headerlink" title="Basic Paxos"></a>Basic Paxos</h4><p><strong>角色</strong></p>
<p>Paxos算法存在3种角色：Proposer、Acceptor、Learner，在实现中一个节点可以担任多个角色。</p>
<blockquote>
<p>•Proposer负责提出提案</p>
<p>•Acceptor负责对提案进行投票</p>
<p>•Learner获取投票结果，并帮忙传播</p>
<p>Learner不参与投票过程，为了简化描述，我们直接忽略掉这个角色。</p>
</blockquote>
<p><strong>算法</strong></p>
<blockquote>
<p>运行过程分为两个阶段</p>
<p>•Prepare阶段</p>
<p>•Accept阶段</p>
<p>•Proposer需要发出两次请求，Prepare请求和Accept请求。</p>
<p>•Acceptor根据其收集的信息，接受或者拒绝提案。</p>
</blockquote>
<p><strong>Prepare阶段</strong></p>
<blockquote>
<p>•Proposer选择一个提案编号n，发送Prepare(n)请求给超过半数（或更多）的Acceptor。</p>
<p>•Acceptor收到消息后，如果n比它之前见过的编号大，就回复这个消息，而且以后不会接受小于n的提案。另外，如果之前已经接受了小于n的提案，回复那个提案编号和内容给Proposer。</p>
</blockquote>
<p><strong>Accept阶段</strong></p>
<blockquote>
<p>•当Proposer收到超过半数的回复时，就可以发送Accept(n, value)请求了。 n就是自己的提案编号，value是Acceptor回复的最大提案编号对应的value，如果Acceptor没有回复任何提案，value就是Proposer自己的提案内容。</p>
<p>•Acceptor收到消息后，如果n大于等于之前见过的最大编号，就记录这个提案编号和内容，回复请求表示接受。</p>
<p>•当Proposer收到超过半数的回复时，说明自己的提案已经被接受。否则回到第一步重新发起提案。</p>
</blockquote>
<p><img src="./zk-paxos/zk_paxos_3.png" alt></p>
<h4 id="共识过程"><a href="#共识过程" class="headerlink" title="共识过程"></a>共识过程</h4><p><strong>情况</strong>1<strong>：提案已接受</strong></p>
<p><img src="./zk-paxos/zk_paxos_5.png" alt></p>
<blockquote>
<p>•这个过程表示，S1收到客户端的提案X，于是S1作为Proposer，给S1-S3发送Prepare(3.1)请求，由于Acceptor S1-S3没有接受过任何提案，所以接受该提案。然后Proposer S1-S3发送Accept(3.1, X)请求，提案X成功被接受。</p>
<p>•在提案X被接受后，S5收到客户端的提案Y，S5给S3-S5发送Prepare(4.5)请求。对S3来说，4.5比3.1大，且已经接受了X，它会回复这个提案 (3.1, X)。S5收到S3-S5的回复后，使用X替换自己的Y，于是发送Accept(4.5, X)请求。S3-S5接受提案。最终所有Acceptor达成一致，都拥有相同的值X。</p>
<p>•这种情况的结果是：<strong>新**</strong>Proposer<strong>**会使用已接受的提案</strong></p>
</blockquote>
<p><strong>情况</strong>2<strong>：提案未接受，新</strong>Proposer<strong>可见</strong></p>
<p><img src="./zk-paxos/zk_paxos_6.png" alt></p>
<blockquote>
<p>•S3接受了提案(3.1, X)，但S1-S2还没有收到请求。此时S3-S5收到Prepare(4.5)，S3会回复已经接受的提案(3.1, X)，S5将提案值Y替换成X，发送Accept(4.5, X)给S3-S5，对S3来说，编号4.5大于3.1，所以会接受这个提案。</p>
<p>•然后S1-S2接受Accept(3.1, X)，最终所有Acceptor达成一致。</p>
<p>•这种情况的结果是：<strong>新</strong>Proposer会使用已提交的值，两个提案都能成功</p>
</blockquote>
<p><strong>情况</strong>3： <strong>提案未接受，新</strong>Proposer<strong>不可见</strong> </p>
<p><img src="./zk-paxos/zk_paxos_7.png" alt></p>
<blockquote>
<p>•S1接受了提案(3.1, X)，S3先收到Prepare(4.5)，后收到Accept(3.1, X)，由于3.1小于4.5，会直接拒绝这个提案。所以提案X无法收到超过半数的回复，这个提案就被阻止了。提案Y可以顺利通过。</p>
<p>•这种情况的结果是：新<strong>Proposer</strong>使用自己的提案，旧提案被阻止</p>
</blockquote>
<p><strong>活锁</strong></p>
<p><img src="./zk-paxos/zk_paxos_8.png" alt></p>
<blockquote>
<p>•活锁发生的几率很小，但是会严重影响性能。就是两个或者多个Proposer在Prepare阶段发生互相抢占的情形。</p>
<p>•解决方案是Proposer失败之后给一个随机的等待时间，这样就减少同时请求的可能。</p>
</blockquote>
<h4 id="Multi-Paxos"><a href="#Multi-Paxos" class="headerlink" title="Multi-Paxos"></a>Multi-Paxos</h4><blockquote>
<p>•它会从Proposer中选出一个Leader，只由Leader提交Proposal，还可以省去Prepare阶段，减少了性能损失。当然，直接把Basic Paxos的多个Proposer的机制搬过来也是可以的，只是性能不够高。</p>
<p>•将Basic Paxos并行之后，就可以同时处理多个提案了，因此要能存储不同的提案，也要保证提案的顺序。</p>
</blockquote>
<p>上文提到的活锁，也可以使用Multi-Paxos来解决</p>
<p><strong>Multi-Paxos需要解决的问题</strong></p>
<p><strong>1. Leader选举</strong></p>
<blockquote>
<p>•一个最简单的选举方法，就是Server ID最大的当Leader。</p>
<p>•每个Server间隔T时间向其他Server发送心跳包，如果一个Server在2T时间内没有收到来自更高ID的心跳，那么它就成为Leader。</p>
<p>•其他Proposer，必须拒绝客户端的请求，或将请求转发给Leader。</p>
<p>•当然，还可以使用其他更复杂的选举方法，这里不再详述。</p>
</blockquote>
<p><strong>2.省略Prepare阶段</strong></p>
<blockquote>
<p>•Prepare的作用是阻止旧的提案，以及检查是否有已接受的提案值。</p>
<p>•当只有一个Leader发送提案的时候，Prepare是不会产生冲突的，可以省略Prepare阶段，这样就可以减少一半RPC请求。</p>
<p>•Prepare请求的逻辑修改为：</p>
<p>–Acceptor记录一个全局的最大提案编号</p>
<p>–回复最大提案编号，如果当前entry以及之后的所有entry都没有接受任何提案，回复noMoreAccepted</p>
<p>–当Leader收到超过半数的noMoreAccepted回复，之后就不需要Prepare阶段了，只需要发送Accept请求。直到Accept被拒绝，就重新需要Prepare阶段。</p>
</blockquote>
<p><strong>3. 完整信息流</strong></p>
<blockquote>
<p>•Basic Paxos只需超过半数的节点达成一致。但是在Multi-Paxos中，这种方式可能会使一些节点无法得到完整的entry信息。我们希望每个节点都拥有全部的信息。</p>
<p>•只有Proposer知道一个提案是否被接受了（根据收到的回复），而Acceptor无法得知此信息。</p>
</blockquote>
<p>第1个问题的解决方案很简单，就是Proposer给全部节点发送Accept请求。</p>
<p>第2个问题稍微复杂一些。首先，我们可以增加一个Success RPC，让Proposer显式地告诉Acceptor，哪个提案已经被接受了，这个是完全可行的，只不过还可以优化一下，减少请求次数。</p>
<p><strong>优化策略</strong></p>
<p><img src="./zk-paxos/zk_paxos_9.png" alt></p>
<blockquote>
<p>在Accept请求中，增加一个firstUnchosenIndex参数，表示Proposer的第一个未接受的Index，这个参数隐含的意思是，对该Proposer来说，小于Index的提案都已经被接受了。因此Acceptor可以利用这个信息，把小于Index的提案标记为已接受。</p>
<p>另外要注意的是，只能标记该Proposer的提案，因为如果发生Leader切换，不同的Proposer拥有的信息可能不同，不区分Proposer直接标记的话可能会不一致。</p>
</blockquote>
<blockquote>
<p>Proposer正在准备提交Index=2的Accept请求，0和1是已接受的提案，因此firstUnchosenIndex=2。当Acceptor收到请求后，比较Index，就可以将Dumplings提案标记为已接受。</p>
<p>由于之前提到的Leader切换的情况，仍然需要显式请求才能获得完整信息。在Acceptor回复Accept消息时，带上自己的firstUnchosenIndex。如果比Proposer的小，那么就需要发送Success(index, value)，Acceptor将收到的index标记为已接受，再回复新的firstUnchosenIndex，如此往复直到两者的index相等。</p>
</blockquote>
<p>这篇文章的分析来源于网络，具体没有记录来源，如有侵权，请联系我删除，谢谢！</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-11-29T08:29:47.000Z">2019-11-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 minutes read (About 2393 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/11/29/zk-pre/">zookeeper学习前瞻</a>
            
        </h1>
        <div class="content">
            <h4 id="ZK的由来"><a href="#ZK的由来" class="headerlink" title="ZK的由来"></a>ZK的由来</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">What is ZooKeeper?</span><br><span class="line">       ZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. All of these kinds of services are used in some form or another by distributed applications. Each time they are implemented there is a lot of work that goes into fixing the bugs and race conditions that are inevitable. Because of the difficulty of implementing these kinds of services, applications initially usually skimp on them, which make them brittle in the presence of change and difficult to manage. Even when done correctly, different implementations of these services lead to management complexity when the applications are deployed.</span><br></pre></td></tr></table></figure>

<p>​    Zookeeper 分布式服务框架是Apache Hadoop 的一个子项目，它主要是用来解决分布式应用中经常遇到的一些数据管理问题，如：统一命名服务、状态同步服务、集群管理、分布式应用配置项的管理等。</p>
<blockquote>
<p>​    Zookeeper 最早起源于雅虎研究院的一个研究小组。在当时，研究人员发现，在雅虎内部很多大型系统基本都需要依赖一个类似的系统来进行分布式协调，但是这些系统往往都存在分布式单点问题。</p>
<p>​    所以，雅虎的开发人员就试图开发一个通用的无单点问题的分布式协调框架，以便让开发人员将精力集中在处理业务逻辑上。</p>
<p>​    关于“ZooKeeper”这个项目的名字，其实也有一段趣闻。在立项初期，考虑到之前内部很多项目都是使用动物的名字来命名的（例如著名的Pig项目)，雅虎的工程师希望给这个项目也取一个动物的名字。</p>
<p>​    时任研究院的首席科学家 Raghu Ramakrishnan 开玩笑地说：“在这样下去，我们这儿就变成动物园了！”</p>
<p>​    此话一出，大家纷纷表示就叫动物园管理员吧，因为各个以动物命名的分布式组件放在一起，雅虎的整个分布式系统看上去就像一个大型的动物园了。</p>
<p>​    而 Zookeeper 正好要用来进行分布式环境的协调，于是，Zookeeper 的名字也就由此诞生了。</p>
<p> ——《Paxos到  ZooKeeper 》</p>
</blockquote>
<h4 id="ZK的目标"><a href="#ZK的目标" class="headerlink" title="ZK的目标"></a>ZK的目标</h4><p>​     将那些复杂且容易出错的分布式一致性服务封装起来，构成一个高效可靠的原语集，并以一系列简单易用的接口提供给用户使用。   </p>
<blockquote>
<p>原语： </p>
<p>  操作系统或计算机网络用语范畴。它是由若干条指令组成的，用于完成一定功能的一个过程。具有不可分割性，即原语的执行必须是连续的，在执行过程中不允许被中断。</p>
</blockquote>
<p><strong>文件系统</strong></p>
<p><img src="./zk-pre/zk_pre_1.png" alt></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">名称空间由 ZooKeeper 中的数据寄存器组成，称为 Znode，这些类似于文件和目录。</span><br><span class="line"></span><br><span class="line">与为存储设计的典型文件系统不同，ZooKeeper 数据保存在内存中，这意味着 ZooKeeper 可以实现高吞吐量和低延迟。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>有四种类型的znode：</p>
<p>1、PERSISTENT-持久化目录节点</p>
<p>客户端与zookeeper断开连接后，该节点依旧存在</p>
<p>2、 PERSISTENT_SEQUENTIAL-持久化顺序编号目录节点</p>
<p>客户端与zookeeper断开连接后，该节点依旧存在，只是Zookeeper给该节点名称进行顺序编号</p>
<p>3、EPHEMERAL-临时目录节点</p>
<p>客户端与zookeeper断开连接后，该节点被删除</p>
<p>4、EPHEMERAL_SEQUENTIAL-临时顺序编号目录节点</p>
<p>客户端与zookeeper断开连接后，该节点被删除，只是Zookeeper给该节点名称进行顺序编号</p>
</blockquote>
<p><strong>通知机制</strong></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Watcher （事件监听器） ： ZooKeeper 允许用户在指定节点上注册一些 Watcher，并且在一些特定事件触发的时候，ZooKeeper 服务端会将事件通知到感兴趣的客户端上去，该机制是 ZooKeeper 实现分布式协调服务的重要特性。</span><br></pre></td></tr></table></figure>



<h4 id="ZK的应用场景"><a href="#ZK的应用场景" class="headerlink" title="ZK的应用场景"></a>ZK的应用场景</h4><p><strong>命名服务</strong></p>
<blockquote>
<p>在zookeeper的文件系统里创建一个目录，即有唯一的path。在我们无法确定上游程序的部署机器时即可与下游程序约定好path，通过path即能互相探索发现</p>
</blockquote>
<p><strong>配置管理</strong></p>
<p><img src="./zk-pre/zk_pre_2.png" alt></p>
<blockquote>
<p>如果程序分散部署在多台机器上，要逐个改变配置就变得困难。好吧，现在把这些配置全部放到zookeeper上去，保存在 Zookeeper 的某个目录节点中，然后所有相关应用程序对这个目录节点进行监听，一旦配置信息发生变化，每个应用程序就会收到 Zookeeper 的通知，然后从 Zookeeper 获取新的配置信息应用到系统中就好。</p>
</blockquote>
<p><strong>集群管理</strong></p>
<p><img src="./zk-pre/zk_pre_3.png" alt></p>
<blockquote>
<p><strong>1.</strong>机器退出和加入</p>
<p> 所有机器约定在父目录GroupMembers下创建临时目录节点，然后监听父目录节点的子节点变化消息。一旦有机器挂掉，该机器与 zookeeper的连接断开，其所创建的临时目录节点被删除，所有其他机器都收到通知。新机器加入 也是类似，所有机器收到通知</p>
<p>2.选举master</p>
<p>举个最简单的例子：所有机器创建临时顺序编号目录节点，每次选取编号最小的机器作为master</p>
</blockquote>
<p><strong>分布式锁</strong></p>
<p><img src="./zk-pre/zk_pre_4.png" alt></p>
<blockquote>
<p>锁服务可以分为两类：一个是保持独占，另一个是控制时序。</p>
<p>独占锁：我们将zookeeper上的一个znode看作是一把锁，通过createznode的方式来实现。所有客户端都去创建 /distribute_lock 节点，最终成功创建的那个客户端也即拥有了这把锁。用完删除掉自己创建的distribute_lock 节点就释放出锁。</p>
<p>时序锁：预先创建 /distribute_lock 节点，所有客户端在它下面创建临时顺序编号目录节点，和选master一样，编号最小的获得锁，用完删除</p>
</blockquote>
<p><strong>队列管理</strong></p>
<blockquote>
<p>1.同步队列</p>
<p>​    当一个队列的成员都聚齐时，这个队列才可用，否则一直等待所有成员到达。</p>
<p>​    实现方案：在约定目录下创建临时目录节点，监听节点数目是否是我们要求的数目</p>
<p>2.FIFO 方式进行入队和出队操作</p>
<p>​    入列有编号，出列按编号</p>
</blockquote>
<p>ZK可以实现的功能远远不止这些，这里只列出一些经典使用场景</p>
<h4 id="ZK集群"><a href="#ZK集群" class="headerlink" title="ZK集群"></a>ZK集群</h4><p>Master/Slave 模式（主备模式）:</p>
<p>​    在这种模式中，通常 Master 服务器作为主服务器提供写服务，其他的 Slave 服务器从服务器通过异步复制的方式获取 Master 服务器最新的数据提供读服务。</p>
<p><strong>角色</strong></p>
<p><img src="./zk-pre/zk_pre_5.png" alt></p>
<blockquote>
<p>引入了Leader、Follower 和 Observer 三种角色。 </p>
<p>1.Leader 既可以为客户端提供写服务又能提供读服务</p>
<p>2.Follower 和  Observer 都只能提供读服务</p>
<p>3.Follower 和 Observer 唯一的区别在于 Observer 机器不参与 Leader 的选举过程，也不参与写操作的“过半写成功”策略，因此 Observer 机器可以在不影响写性能的情况下提升集群的读性能</p>
</blockquote>
<p><img src="./zk-pre/zk_pre_6.png" alt></p>
<h4 id="ZK一致性原理"><a href="#ZK一致性原理" class="headerlink" title="ZK一致性原理"></a>ZK一致性原理</h4><blockquote>
<p>ZK的一致性算法参照paxos算法实现，但不完全实现paxos算法。</p>
<p>ZAB 协议并不像 Paxos 算法那样，是一种通用的分布式一致性算法，它是一种特别为 ZooKeeper 设计的崩溃可恢复的原子消息广播算法。</p>
<p>ZAB（ZooKeeper Atomic Broadcast 原子广播）协议是为分布式协调服务 ZooKeeper 专门设计的一种支持崩溃恢复的原子广播协议。</p>
</blockquote>
<p>ZAB 协议包括两种基本的模式，分别是<strong>崩溃恢复</strong>和<strong>消息广播</strong>。</p>
<blockquote>
<p>当整个服务框架在启动过程中，或是当 Leader 服务器出现网络中断、崩溃退出与重启等异常情况时，ZAB 协议就会进入恢复模式并选举产生新的 Leader 服务器。</p>
<p>当选举产生了新的 Leader 服务器，同时集群中已经有过半的机器与该 Leader 服务器完成了状态同步之后，ZAB 协议就会退出恢复模式。</p>
<p>其中，所谓的状态同步是指数据同步，用来保证集群中存在过半的机器能够和 Leader 服务器的数据状态保持一致。</p>
<p>当集群中已经有过半的 Follower 服务器完成了和 Leader 服务器的状态同步，那么整个服务框架就可以进人消息广播模式了。</p>
<p>当一台同样遵守 ZAB 协议的服务器启动后加入到集群中时，如果此时集群中已经存在一个 Leader 服务器在负责进行消息广播。</p>
<p>那么新加入的服务器就会自觉地进人数据恢复模式：找到 Leader 所在的服务器，并与其进行数据同步，然后一起参与到消息广播流程中去。</p>
</blockquote>
<p>请看下文paxos解读</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-11-29T05:54:08.000Z">2019-11-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 minutes read (About 2617 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/11/29/j2ee-log/">LOG日志桥接关系</a>
            
        </h1>
        <div class="content">
            <p><img src="./j2ee-log/log_1.png" alt></p>
<p>这里思考几个问题：</p>
<p>1.日志框架是给Java应用提供的方便进行记录日志的，那为什么又不让在应用中直接使用其API呢？</p>
<p>2.这里面推崇使用的SLF4J是什么呢？</p>
<p>3.所谓的门面模式又是什么东西呢？</p>
<p>4.它是怎么做到统一的呢？</p>
<h4 id="门面模式"><a href="#门面模式" class="headerlink" title="门面模式"></a>门面模式</h4><p><strong>迪米特法则</strong>：<strong>talk only to your immediate friends</strong></p>
<pre><code>迪米特法则的[初衷](https://baike.baidu.com/item/初衷)在于降低类之间的[耦合](https://baike.baidu.com/item/耦合/2821124)。由于每个类尽量减少对其他类的依赖，因此，很容易使得系统的功能模块功能独立，相互之间不存在（或很少有）依赖关系。

迪米特法[友元类](https://baike.baidu.com/item/友元类/518734)转达。因此，应用迪米特法则有可能造成的一个后果就是：系统中存在大量的中介类，这些类之所以存在完全是为了传递类之间的相互调用关系这在一定程度上增加了系统的复杂度。</code></pre><p><img src="./j2ee-log/log_2.png" alt></p>
<p>​    外观模式创造出一个外观对象，将客户端所涉及的属于一个子系统的协作伙伴的数量减到最少，使得客户端与子系统内部的对象的相互作用被外观对象所取代。外观类充当了客户类与子系统类之间的“第三者”，降低了客户类与子系统类之间的耦合度  </p>
<p>更形象点：</p>
<p><img src="./j2ee-log/log_3.png" alt></p>
<p><img src="./j2ee-log/log_4.png" alt></p>
<p><strong>优点</strong>:</p>
<p>　　<strong>-</strong> <strong>松耦合</strong></p>
<p>　　用户与子系统解耦，屏蔽子系统；可以提高子系统的独立性； </p>
<p>　　<strong>-</strong> <strong>简单易用</strong></p>
<p>　　简化用户与子系统的依赖关系；<br>    用户只与门面对接，有统一的入口；不需要知道所有子系统及内部构造；</p>
<p>　　<strong>-</strong> <strong>更好的划分访问层次</strong></p>
<p>　　有些方法是对系统外的，有些方法是系统内部相互交互的使用的。子系统把那些暴露给外部的功能集中到门面中，这样就可以实现客户端的使用，很好的隐藏了子系统内部的细节。</p>
<p><strong>缺点</strong>:</p>
<pre><code>不能很好地限制客户使用子系统类，如果对客户访问子系统类做太多的限制则减少了可变性和灵活性。

在不引入抽象外观类的情况下，增加新的子系统可能需要修改外观类或客户端的源代码，违背了“开闭原则”。</code></pre><p>开闭原则两个主要特征：</p>
<p>（1）对于扩展是开放的（Open for extension）。</p>
<p>（2）对于修改是关闭的（Closed for modification）。</p>
<p><strong>错误使用行为</strong></p>
<pre><code>不要通过继承一个外观类在子系统中加入新的行为，这种做法是错误的。

外观模式的用意是为子系统提供一个集中化和简化的沟通渠道，而不是向子系统加入新的行为，新的行为的增加应该通过修改原有子系统类或增加新的子系统类来实现，不能通过外观类来实现。</code></pre><h4 id="Log日志框架关系"><a href="#Log日志框架关系" class="headerlink" title="Log日志框架关系"></a>Log日志框架关系</h4><ol>
<li>1996年早期，欧洲安全电子市场项目组决定编写它自己的程序跟踪API(Tracing API)。经过不断的完善，这个API终于成为一个十分受欢迎的Java日志软件包，即Log4j。后来Log4j成为Apache基金会项目中的一员。</li>
<li>期间Log4j近乎成了Java社区的日志标准。据说Apache基金会还曾经建议Sun引入Log4j到java的标准库中，但Sun拒绝了。</li>
<li>2002年Java1.4发布，Sun推出了自己的日志库JUL(Java Util Logging),其实现基本模仿了Log4j的实现。在JUL出来以前，Log4j就已经成为一项成熟的技术，使得Log4j在选择上占据了一定的优势。</li>
<li>接着，Apache推出了Jakarta Commons Logging，JCL只是定义了一套日志接口(其内部也提供一个Simple Log的简单实现)，支持运行时动态加载日志组件的实现，也就是说，在你应用代码里，只需调用Commons Logging的接口，底层实现可以是Log4j，也可以是Java Util Logging。</li>
<li>后来(2006年)，Ceki Gülcü离开了Apache。然后先后创建了Slf4j(日志门面接口，类似于Commons Logging)和Logback(Slf4j的实现)两个项目，并回瑞典创建了QOS公司，QOS官网上是这样描述Logback的：The Generic，Reliable Fast&amp;Flexible Logging Framework(一个通用，可靠，快速且灵活的日志框架)。从此以后，Java日志领域被划分为两大阵营：Commons Logging阵营和Slf4j阵营。</li>
<li>2012年，Apache重写了Log4j 1.x，成立了新的项目Log4j 2</li>
</ol>
<p><img src="./j2ee-log/log_5.png" alt></p>
<p>Commons Logging和Slf4j是日志门面</p>
<p>Log4j和Logback则是具体的日志实现方案</p>
<p><img src="./j2ee-log/log_6.png" alt></p>
<p>这里可以看出分为三个层次：</p>
<p>抽象层：提供应用直接调用api</p>
<p>适配层：提供于抽象层和实现层的适配实现</p>
<p>实现层：api的实现</p>
<p><strong>通过log4j-slf4j-impl来看是如何桥接</strong></p>
<p><img src="./j2ee-log/log_7.png" alt></p>
<table>
<thead>
<tr>
<th>jar包名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>slf4j-log4j12-1.7.13.jar</strong></td>
<td>Log4j1.2版本的桥接器，你需要将Log4j.jar加入Classpath。</td>
</tr>
<tr>
<td><strong>slf4j-jdk14-1.7.13.jar</strong></td>
<td>java.util.logging的桥接器，Jdk原生日志框架。</td>
</tr>
<tr>
<td><strong>slf4j-nop-1.7.13.jar</strong></td>
<td>NOP桥接器，默默丢弃一切日志。</td>
</tr>
<tr>
<td><strong>slf4j-simple-1.7.13.jar</strong></td>
<td>一个简单实现的桥接器，该实现输出所有事件到System.err.  只有Info以及高于该级别的消息被打印，在小型应用中它也许是有用的。</td>
</tr>
<tr>
<td><strong>slf4j-jcl-1.7.13.jar</strong></td>
<td>Jakarta Commons Logging 的桥接器.  这个桥接器将Slf4j所有日志委派给Jcl。</td>
</tr>
<tr>
<td><strong>logback-classic-1.0.13.jar(requires  logback-core-1.0.13.jar)</strong></td>
<td>Slf4j的原生实现，Logback直接实现了Slf4j的接口，因此使用Slf4j与Logback的结合使用也意味更小的内存与计算开销</td>
</tr>
</tbody></table>
<p><strong>如何将日志框架指向SLF4J</strong>：</p>
<table>
<thead>
<tr>
<th>jar包名</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>log4j-over-slf4j.jar</strong></td>
<td>将Log4j  1重定向到Slf4j</td>
</tr>
<tr>
<td><strong>jcl-over-slf4j.jar</strong></td>
<td>将Commons  Logging里的Simple  Logger重定向到slf4j</td>
</tr>
<tr>
<td><strong>jul-to-slf4j.jar</strong></td>
<td>将Java  Util  Logging重定向到Slf4j</td>
</tr>
<tr>
<td><strong>log4j-to-slf4j</strong></td>
<td>log4j 2 API到slf4j的适配</td>
</tr>
</tbody></table>
<p><strong>Slf4j/log4j2集成举例</strong></p>
<p>如果我们在系统中需要使用slf4j和log4j2来进行日志输出的话，我们需要引入下面的jar包：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log4j2核心jar包：log4j-api-2.7.jar和log4j-core-2.7.jar</span><br><span class="line">slf4j核心jar包：slf4j-api-1.6.4.jar</span><br><span class="line">slf4j与log4j2的桥接包：log4j-slf4j-impl-2.7.jar，这个包的作用就是使用slf4j的api，但是底层实现是基于log4j2</span><br></pre></td></tr></table></figure>

<p><strong>死循环问题</strong></p>
<table>
<thead>
<tr>
<th>多个日志jar包形成死循环的条件</th>
<th>产生原因</th>
</tr>
</thead>
<tbody><tr>
<td><strong>log4j-over-slf4j.jar和slf4j-log4j12.jar</strong></td>
<td>由于slf4j-log4j12.jar的存在会将所有日志调用委托给log4j。但由于同时由于log4j-over-slf4j.jar的存在，会将所有对log4j  api的调用委托给相应等值的slf4j,所以log4j-over-slf4j.jar和slf4j-log4j12.jar同时存在会形成死循环</td>
</tr>
<tr>
<td><strong>jcl-over-slf4j</strong> <strong>与</strong> <strong>slf4j-jcl</strong></td>
<td>Jcl-over-slf4j  : commons-logging切换到slf4j  slf4j-jcl  : slf4j切换到commons-logging</td>
</tr>
<tr>
<td><strong>jul-to-slf4j.jar和slf4j-jdk14.jar</strong></td>
<td>由于slf4j-jdk14.jar的存在会将所有日志调用委托给jdk的log。但由于同时jul-to-slf4j.jar的存在，会将所有对jul api的调用委托给相应等值的slf4j，所以jul-to-slf4j.jar和slf4j-jdk14.jar同时存在会形成死循环</td>
</tr>
</tbody></table>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">死循环日志：</span><br><span class="line">SLF4J: Detected both log4j-over-slf4j.jar AND slf4j-log4j12.jar on the class path, preempting StackOverflowError.   </span><br><span class="line">SLF4J: See also http://www.slf4j.org/codes.html#log4jDelegationLoop for more details.</span><br></pre></td></tr></table></figure>

<p>看到这里，是不是很头大，这么多工具类，怎么管理这些包之间的关系，使得日志的使用情况和预期一致，并且规避日志引起的问题呢？</p>
<h4 id="日志依赖包管理方案"><a href="#日志依赖包管理方案" class="headerlink" title="日志依赖包管理方案"></a><strong>日志依赖包管理方案</strong></h4><p><strong>方案1:采用maven的exclusion方案</strong>  </p>
<p><img src="./j2ee-log/log_8.png" alt></p>
<p>优点是exclusion是maven原生提供的</p>
<p>不足之处是如果有多个组件都依赖了commons-logging，则需要在很多处增加，使用起来不太方便</p>
<p><strong>方案2: 在maven声明commons-logging的scope为provided</strong>  </p>
<p>​    这种方案在调试代码时还是有可能导致IDE将commons-logging放置在classpath下，从而导致程序运行时出现异常</p>
<p><strong>方案3:在maven私服中增加虚拟的版本号</strong> 【建议方案】</p>
<p><img src="./j2ee-log/log_9.png" alt></p>
<p>​    好处是声明方式比较简单，用IDE调试代码时也不会出现问题，不足之处是maven中央仓库中是不存在的，需要发布到自己的maven私服中。</p>
<p>​    但是，这种方式得注意，由于maven的加载关系，必须得把此配置声明放在顶级pom文件中，保证优先加载此空jar包</p>
<p><strong>虚拟版本号原理</strong></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Maven 解析 pom.xml 文件时，同一个 jar 包只会保留一个，这样有效的避免因引入两个 jar 包导致的工程运行不稳定性。</span><br><span class="line"></span><br><span class="line">  	举例：假设 A-&gt;B-&gt;C-&gt;D1, E-&gt;F-&gt;D2，D1,D2 分别为 D 的不同版本。那么会引入哪个版本？</span><br></pre></td></tr></table></figure>

<p>  <strong>Maven</strong> <strong>默认处理策略</strong></p>
<ol>
<li><p><strong>最短路径优先</strong></p>
<pre><code>Maven 面对 D1 和 D2 时，会默认选择最短路径的那个 jar 包，即 D2。E-&gt;F-&gt;D2 比 A-&gt;B-&gt;C-&gt;D1 路径短 1。</code></pre></li>
<li><p><strong>最先声明优先</strong>     </p>
</li>
</ol>
<p>​        如果路径一样的话，举个： A-&gt;B-&gt;C1, E-&gt;F-&gt;C2 ，两个依赖路径长度都是 2，那么就选择最先声明。</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-11-28T08:41:45.000Z">2019-11-28</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 992 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/11/28/algorithm-lru/">lru算法</a>
            
        </h1>
        <div class="content">
            <h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>​    LRU（Least Recently Used）直译为“最近最少使用”。其实很多老外发明的词直译过来对于我们来说并不是特别好理解，甚至有些词并不在国人的思维模式之内，比如快速排序中的Pivot，模拟信号中的Analog 等等。笔者认为最好的理解方式就是看他诞生的原因，看这个概念的出现如何一步一步演变为现在的样子。为了力求方便理解，下面我们先来看看LRU是什么，主要是为了解决什么问题。</p>
<p>​    我们的内存是有限的。所以当缓存数据在内存越来越多，以至于无法存放即将到来的新缓存数据时，就必须扔掉最不常用的缓存数据。所以对于LRU的抽象总结如下：</p>
<ul>
<li>缓存的容量是有限的</li>
<li>当缓存容量不足以存放需要缓存的新数据时，必须丢掉最不常用的缓存数据</li>
</ul>
<h4 id="实现LRU"><a href="#实现LRU" class="headerlink" title="实现LRU"></a>实现LRU</h4><p>​    1.用一个数组来存储数据，给每一个数据项标记一个访问时间戳，每次插入新数据项的时候，先把数组中存在的数据项的时间戳更新。当数组空间已满时，将时间戳最小的数据项淘汰。</p>
<p>​    2.利用一个链表来实现，每次新插入数据的时候将新数据插到链表的头部；每次缓存命中（即数据被访问），则将数据移到链表头部；那么当链表满的时候，就将链表尾部的数据丢弃。</p>
<p>​    3.利用链表和hashmap。当需要插入新的数据项的时候，如果新数据项在链表中存在（一般称为命中），则把该节点移到链表头部，如果不存在，则新建一个节点，放到链表头部，若缓存满了，则把链表最后一个节点删除即可。在访问数据的时候，如果数据项在链表中存在，则把该节点移到链表头部，否则返回-1。这样一来在链表尾部的节点就是最近最久未访问的数据项。</p>
<p><strong>比较</strong></p>
<p>​    对于第一种方法，需要不停地维护数据项的访问时间戳，另外，在插入数据、删除数据以及访问数据时，时间复杂度都是O(n)。对于第二种方法，链表在定位数据的时候时间复杂度为O(n)。所以在一般使用第三种方式来是实现LRU算法。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LruLinkedHashMap</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">V</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">LinkedHashMap</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> Integer cacheSize;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LruLinkedHashMap</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">        <span class="hljs-comment">// 由于LinkedHashMap是为自动扩容的，当table数组中元素大于Capacity * loadFactor的时候，就会自动进行两倍扩容。但是为了使缓存大小固定，就需要在初始化的时候传入容量大小和负载因子。为了使得到达设置缓存大小不会进行自动扩容，需要将初始化的大小进行计算再传入</span></span><br><span class="line">        <span class="hljs-keyword">int</span> capacity = (<span class="hljs-keyword">int</span>)Math.ceil(initialCapacity / <span class="hljs-number">0.75f</span>) + <span class="hljs-number">1</span>;</span><br><span class="line">      	<span class="hljs-comment">/*</span></span><br><span class="line"><span class="hljs-comment">         * 第三个参数设置为true，代表linkedlist按访问顺序排序，可作为LRU缓存</span></span><br><span class="line"><span class="hljs-comment">         * 第三个参数设置为false，代表按插入顺序排序，可作为FIFO缓存</span></span><br><span class="line"><span class="hljs-comment">         */</span></span><br><span class="line">        <span class="hljs-keyword">super</span>(capacity, <span class="hljs-number">0.75f</span>, <span class="hljs-keyword">true</span>);</span><br><span class="line">        cacheSize = initialCapacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">removeEldestEntry</span><span class="hljs-params">(Map.Entry&lt;K, V&gt; eldest)</span> </span>&#123;</span><br><span class="line">      	<span class="hljs-comment">//当返回true的时候，就会remove其中最久的元素</span></span><br><span class="line">        <span class="hljs-keyword">return</span> size() &gt; cacheSize;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>参见：<a href="[https://github.com/AobingJava/JavaFamily/blob/master/docs/redis/%E9%9B%86%E7%BE%A4%E9%AB%98%E5%8F%AF%E7%94%A8%E3%80%81%E5%93%A8%E5%85%B5%E3%80%81%E6%8C%81%E4%B9%85%E5%8C%96%E3%80%81LRU.md](https://github.com/AobingJava/JavaFamily/blob/master/docs/redis/集群高可用、哨兵、持久化、LRU.md)">LRU</a></p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/page/0/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/2/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/2/">2</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/avatar.png" alt="Your name">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Your name
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Your title
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Your location</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            18
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            0
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            16
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank">
                Follow</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="https://github.com/ppoffice">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/DUBBO/" style="font-size: 10px;">DUBBO</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/I-O/" style="font-size: 15px;">I/O</a> <a href="/tags/J2EE/" style="font-size: 20px;">J2EE</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/LINUX/" style="font-size: 20px;">LINUX</a> <a href="/tags/LOG/" style="font-size: 10px;">LOG</a> <a href="/tags/MOCK/" style="font-size: 10px;">MOCK</a> <a href="/tags/MQ/" style="font-size: 10px;">MQ</a> <a href="/tags/MYSQL/" style="font-size: 10px;">MYSQL</a> <a href="/tags/REDIS/" style="font-size: 20px;">REDIS</a> <a href="/tags/SPRING/" style="font-size: 10px;">SPRING</a> <a href="/tags/ZK/" style="font-size: 15px;">ZK</a> <a href="/tags/linux/" style="font-size: 10px;">linux </a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/12/13/jvm-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="jvm">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-13T09:33:20.000Z">2019-12-13</time></div>
                    <a href="/2019/12/13/jvm-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">jvm</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/13/mysql-index/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="mysql索引">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-13T07:39:12.000Z">2019-12-13</time></div>
                    <a href="/2019/12/13/mysql-index/" class="title has-link-black-ter is-size-6 has-text-weight-normal">mysql索引</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/13/http-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="http1.x、http 2和https">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-13T06:23:41.000Z">2019-12-13</time></div>
                    <a href="/2019/12/13/http-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">http1.x、http 2和https</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/05/dubbo-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="dubbo学习">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-05T07:59:27.000Z">2019-12-05</time></div>
                    <a href="/2019/12/05/dubbo-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">dubbo学习</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/04/spring-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="spring学习前瞻">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-04T02:30:01.000Z">2019-12-04</time></div>
                    <a href="/2019/12/04/spring-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">spring学习前瞻</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">November 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DUBBO/">
                        <span class="tag">DUBBO</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HTTP/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/I-O/">
                        <span class="tag">I/O</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/J2EE/">
                        <span class="tag">J2EE</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JVM/">
                        <span class="tag">JVM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LINUX/">
                        <span class="tag">LINUX</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LOG/">
                        <span class="tag">LOG</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MOCK/">
                        <span class="tag">MOCK</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MQ/">
                        <span class="tag">MQ</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MYSQL/">
                        <span class="tag">MYSQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/REDIS/">
                        <span class="tag">REDIS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/SPRING/">
                        <span class="tag">SPRING</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ZK/">
                        <span class="tag">ZK</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux </span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/12/13/jvm-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="jvm">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-13T09:33:20.000Z">2019-12-13</time></div>
                    <a href="/2019/12/13/jvm-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">jvm</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/13/mysql-index/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="mysql索引">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-13T07:39:12.000Z">2019-12-13</time></div>
                    <a href="/2019/12/13/mysql-index/" class="title has-link-black-ter is-size-6 has-text-weight-normal">mysql索引</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/13/http-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="http1.x、http 2和https">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-13T06:23:41.000Z">2019-12-13</time></div>
                    <a href="/2019/12/13/http-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">http1.x、http 2和https</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/05/dubbo-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="dubbo学习">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-05T07:59:27.000Z">2019-12-05</time></div>
                    <a href="/2019/12/05/dubbo-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">dubbo学习</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/04/spring-pre/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="spring学习前瞻">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-04T02:30:01.000Z">2019-12-04</time></div>
                    <a href="/2019/12/04/spring-pre/" class="title has-link-black-ter is-size-6 has-text-weight-normal">spring学习前瞻</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">November 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DUBBO/">
                        <span class="tag">DUBBO</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HTTP/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/I-O/">
                        <span class="tag">I/O</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/J2EE/">
                        <span class="tag">J2EE</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JVM/">
                        <span class="tag">JVM</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LINUX/">
                        <span class="tag">LINUX</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LOG/">
                        <span class="tag">LOG</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MOCK/">
                        <span class="tag">MOCK</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MQ/">
                        <span class="tag">MQ</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MYSQL/">
                        <span class="tag">MYSQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/REDIS/">
                        <span class="tag">REDIS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/SPRING/">
                        <span class="tag">SPRING</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ZK/">
                        <span class="tag">ZK</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux </span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="zixcon·blog" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 John Doe&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
<script src="/js/animation.js"></script>

    
    
<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>

    
    
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" target="_blank" rel="noopener">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>

    
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>
    
    
<a id="back-to-top" title="Back to Top" href="javascript:;" target="_blank" rel="noopener">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>

    
    
    
    
    
    
    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>